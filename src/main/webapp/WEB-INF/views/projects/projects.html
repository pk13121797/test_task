<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="/resources/css/home.css" rel="stylesheet">
    <title th:text="#{projects.title}">Projects</title>
</head>
<body>
<br>
<h2 class="ml" th:text="#{projects.title}">Projects</h2>
<br>
<th:block th:if="${!projects.isEmpty()}">
    <table class="table">
        <tr>
            <th width="80" th:text="#{projects.id}">Id</th>
            <th width="120" th:text="#{projects.name}">
                <a th:href="@{'/projects/page/' + ${currentPage} + '?sortField=title&sortDirection=' + ${sortReverse}}">Title</a>
            </th>
            <th width="120" th:text="#{projects.abbreviation}">Abbreviation</th>
            <th width="120" th:text="#{projects.description}">Description</th>
            <th width="80" th:text="#{projects.edit}">Edit</th>
            <th width="80" th:text="#{projects.delete}">Delete</th>
        </tr>
        <div th:each="project : ${projects}">
            <tr>
                <td><b th:text="${project.getId()}"></b></td>
                <td><b th:text="${project.getTitle()}"></b></td>
                <td><b th:text="${project.getAbbreviation()}"></b></td>
                <td><b th:text="${project.getDescription()}"></b></td>
                <td>
                    <form th:action="@{/projects/edit/{id}(id=${project.getId()})}">
                       <button type="submit" class="btn btn-link" th:text="#{projects.edit}">Edit</button>
                    </form>
                </td>
                <td>
                    <form th:action="@{/projects/{id}(id=${project.getId()})}" th:method="delete">
                        <button type="submit" class="btn btn-link" th:text="#{projects.delete}">Delete</button>
                    </form>
                </td>
            </tr>
        </div>
    </table>
</th:block>
<br>
<div class="ml" th:if="${totalPages > 1}">
    <nav aria-label="Page navigation">
        <ul class="pagination">
            <li class="page-item">
                <a class="page-link" th:if="${page.hasPrevious()}" th:href="@{'/projects/page/' + ${currentPage - 1} + '?sortField=' + ${sortField} + '&sortDirection=' + ${sortDirection}}" th:text="#{menu.prev}">Previous</a>
            </li>
            <li th:each="i: ${#numbers.sequence(1,totalPages)}" class="page-item">
                <div class="page-item" th:if="${currentPage != i}">
                    <a class="page-link" th:href="@{'/projects/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDirection=' + ${sortDirection}}">[[${i}]]</a>
                </div>
                <div class="page-item active" th:if="${currentPage == i}">
                    <a class="page-link" th:href="@{'/projects/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDirection=' + ${sortDirection}}">[[${i}]]</a>
                </div>
            </li>
            <li class="page-item">
                <a class="page-link" th:if="${page.hasNext()}" th:href="@{'/projects/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDirection=' + ${sortDirection}}" th:text="#{menu.next}">Next</a>
            </li>
        </ul>
    </nav>
</div>
<br>
<div class="ml">
    <form th:action="@{/projects/new}">
        <button class="btn btn-light" th:text="#{projects.add}">Add project</button>
    </form> <br>
    <form th:action="@{/}">
        <button class="btn btn-light" th:text="#{menu.back}">Back</button>
    </form>
</div>
</body>
</html>
